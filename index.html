<!DOCTYPE html>
<html>
    <head>      
        <title>Monitor System</title>
        <link rel="stylesheet" href="index_css.css">
    </head>

    <body>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
        <script src="firebase-config.js"></script>
        
        <script src="index_js.js"></script>
        <script src="plot/plotly-latest.min.js"></script>
        <div class="container">
            <h1>Data Visualization</h1>
            <p id="datetime">Date Time Status</p>
            <script>
                var d = new Date();
                document.getElementById("datetime").innerHTML = d.toDateString();
            </script>

            <div class="container1">
                <table class="table1">
                <tr>
                    <td id="data_1">
                        <div class="data">
                            <header>Suhu (Celcius)</header>
                            <p id="p_1">Data Value</p>
                            <!-- <script>
                                document.getElementById("p_1").innerHTML = timeData;
                            </script> -->
                        </div>
                    </td>
                    <td id="data_2">
                        <div class="data">
                            <header>Kelembapan (%)</header>
                            <p id="p_2">Data Value</p>
                        </div>
                    </td>
                    <td id="data_3">
                        <div class="data">
                            <header>Intesitas Cahaya (lux)</header>
                            <p id="p_3">Data Value</p>
                        </div>
                    </td>
                    <td id="data_4">
                        <div class="data">
                            <header>Status</header>
                            <table class="subTabel1">
                                <tr class="elemSubTabel1">
                                    <td class="status1">Suhu</td>
                                    <td class="status1"> : </td>
                                    <td id="dataSuhu">data1</td>
                                </tr>
                                <tr class="elemSubTabel1">
                                    <td class="status2">Kelembapan</td>
                                    <td class="status2"> : </td>
                                    <td id="dataKel">data2</td>
                                </tr>
                                <tr class="elemSubTabel1">
                                    <td class="status3">Intesitas</td>
                                    <td class="status3"> : </td>
                                    <td id="dataIntent">data3</td>
                                </tr>
                            </table>
                        </div>
                    </td>
                </tr>
                </table> 
            </div>

            <div class="container2">
                <table class="table2">
                    <tr>
                        <th class="plot_label">Grafik Suhu</th>
                        <th class="plot_label">Grafik Kelembapan</th>
                        <th class="plot_label">Grafik Intesitas Cahaya</th>
                    </tr>
                    <tr>
                        <td>
                            <div class="subdata" id="chart1" style="width: 30vw;height: 20vw;"></div>
                            <script>
                                Plotly.plot('chart1',[{
                                    x:[parseFloat(waktu)],
                                    y:[parseFloat(suhuData)],
                                    type:'lines',
                                    line: {
                                    color: 'rgb(192, 255, 20)',
                                    width: 3
                                    }
                                }], {
                                    paper_bgcolor: "rgba(0,0,0,0)",
                                    plot_bgcolor: "rgba(0,0,0,0)",
                                    newshape_line_color: "rgba(255,255,255,1)",
                                    title: {
                                    // text: "Grafik Suhu",
                                    font:{
                                        family:"Courier New",
                                        size: 25,
                                        color: 'rgb(255,255,255)',
                                    }
                                    },
                                    yaxis: {
                                    title: {
                                        text: 'Suhu',
                                        font: {
                                        family: 'Courier New, monospace',
                                        size: 18,
                                        color: '#ffffff'
                                        }
                                    },
                                    color: 'rgb(255,0,0)'
                                    },
                                    xaxis: {
                                    title: {
                                        text: 'Time',
                                        font: {
                                        family: 'Courier New, monospace',
                                        size: 18,
                                        color: '#ffffff'
                                        }
                                    },
                                    color: 'rgb(255,0,0)'
                                    }
                                });
                                
                                // var count = 0;
                                setInterval(function() {
                                    Plotly.extendTraces('chart1', {
                                        x: [[parseFloat(waktu)]], y: [[parseFloat(suhuData)]]
                                    }, [0]);
                                    // count++;
                                    Plotly.relayout('chart1',{
                                    xaxis: {
                                        range: [parseFloat(waktu)-50,parseFloat(waktu)],
                                        title: {
                                        text: 'Time',
                                        font: {
                                            family: 'Courier New, monospace',
                                            size: 18,
                                            color: '#ffffff'
                                        }
                                        },
                                        color: 'rgb(255,0,0)'
                                    },
                                    yaxis: {
                                        range: [0,50],
                                        title: {
                                        text: 'Suhu',
                                        font: {
                                            family: 'Courier New, monospace',
                                            size: 18,
                                            color: '#ffffff'
                                        }
                                        },
                                        color: 'rgb(255,0,0)'
                                    }

                                    });
                                }, 10);
                            </script>
                        </td> 
                        <td>
                            <div class="subdata" id="chart2" style="width: 30vw;height: 20vw;"></div>
                            <script>
                                Plotly.plot('chart2',[{
                                    x:[parseFloat(waktu)],
                                    y:[parseFloat(kelembapanData)],
                                    type:'lines',
                                    line: {
                                    color: 'rgb(192, 255, 20)',
                                    width: 3
                                    }
                                }], {
                                    paper_bgcolor: "rgba(0,0,0,0)",
                                    plot_bgcolor: "rgba(0,0,0,0)",
                                    newshape_line_color: "rgba(255,255,255,1)",
                                    title: {
                                    // text: "Grafik Kelembapan",
                                    font:{
                                        family:"Courier New",
                                        size: 25,
                                        color: 'rgb(255,255,255)'
                                    }
                                    },
                                    yaxis: {
                                    title: {
                                        text: 'Kelembapan',
                                        font: {
                                        family: 'Courier New, monospace',
                                        size: 18,
                                        color: '#ffffff'
                                        }
                                    },
                                    color: 'rgb(255,0,0)'
                                    },
                                    xaxis: {
                                    title: {
                                        text: 'Time',
                                        font: {
                                        family: 'Courier New, monospace',
                                        size: 18,
                                        color: '#ffffff'
                                        }
                                    },
                                    color: 'rgb(255,0,0)'
                                    }
                                });
                                
                                // var count = 0;
                                setInterval(function() {
                                    Plotly.extendTraces('chart2', {
                                        x: [[parseFloat(waktu)]], y: [[parseFloat(kelembapanData)]]
                                    }, [0]);
                                    // count++;
                                    Plotly.relayout('chart2',{
                                    xaxis: {
                                        range: [parseFloat(waktu)-50,parseFloat(waktu)],
                                        title: {
                                        text: 'Time',
                                        font: {
                                            family: 'Courier New, monospace',
                                            size: 18,
                                            color: '#ffffff'
                                        }
                                        },
                                        color: 'rgb(255,0,0)'
                                    },
                                    yaxis: {
                                        range: [0,100],
                                        title: {
                                        text: 'Kelembapan',
                                        font: {
                                            family: 'Courier New, monospace',
                                            size: 18,
                                            color: '#ffffff'
                                        }
                                        },
                                        color: 'rgb(255,0,0)'
                                    }
                                    });
                                }, 10);
                            </script>
                        </td> 
                        <td>
                            <div class="subdata" id="chart3" style="width: 30vw;height: 20vw;"></div>
                            <script>
                                Plotly.plot('chart3',[{
                                    x:[parseFloat(waktu)],
                                    y:[parseFloat(intensitasData)],
                                    type:'lines',
                                    line: {
                                    color: 'rgb(192, 255, 20)',
                                    width: 3
                                    }
                                }], {
                                    paper_bgcolor: "rgba(0,0,0,0)",
                                    plot_bgcolor: "rgba(0,0,0,0)",
                                    newshape_line_color: "rgba(255,255,255,1)",
                                    title: {
                                    // text: "Grafik Intesitas Cahaya",
                                    font:{
                                        family:"Courier New",
                                        size: 25,
                                        color: 'rgb(255,255,255)'
                                    }
                                    },
                                    yaxis: {
                                    title: {
                                        text: 'Intesitas ',
                                        font: {
                                        family: 'Courier New, monospace',
                                        size: 18,
                                        color: '#ffffff'
                                        }
                                    },
                                    color: 'rgb(255,0,0)'
                                    },
                                    xaxis: {
                                    title: {
                                        text: 'Time',
                                        font: {
                                        family: 'Courier New, monospace',
                                        size: 18,
                                        color: '#ffffff'
                                        }
                                    },
                                    color: 'rgb(255,0,0)'
                                    }
                                });
                                
                                // var count = 0;
                                setInterval(function() {
                                    Plotly.extendTraces('chart3', {
                                        x: [[parseFloat(waktu)]], y: [[parseFloat(intensitasData)]]
                                    }, [0]);
                                    // count++;
                                    Plotly.relayout('chart3',{
                                    xaxis: {
                                        range: [parseFloat(waktu)-50,parseFloat(waktu)],
                                        title: {
                                        text: 'Time',
                                        font: {
                                            family: 'Courier New, monospace',
                                            size: 18,
                                            color: '#ffffff'
                                        }
                                        },
                                        color: 'rgb(255,0,0)'
                                    },
                                    yaxis: {
                                        range: [0,500],
                                        title: {
                                        text: 'Intensitas',
                                        font: {
                                            family: 'Courier New, monospace',
                                            size: 18,
                                            color: '#ffffff'
                                        }
                                        },
                                        color: 'rgb(255,0,0)'
                                    }
                                    });
                                }, 10);
                            </script>
                        </td> 
                    </tr>
                </table>
            </div>
        </div>
    </body>
